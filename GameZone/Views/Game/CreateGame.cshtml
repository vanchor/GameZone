@model GameZone.ViewModels.GameVM.GameViewModel
@{
	ViewData["Title"] = "Home Page";
}
@section Styles {
   <style>
	   #previewScroll{
		   max-width: 927px;
		   width: fit-content;
	   }
   </style>
}

<form asp-controller="Game" asp-action="CreateGame" method="post" enctype="multipart/form-data">
	<div class="row col-8 mx-auto">
		<div class="col-5 mt-5">
			<div class="form-group">
				<label asp-for="@Model.Name"></label>
				<input class="form-control" asp-for="@Model.Name" />

				<span asp-validation-for="@Model.Name"></span>
			</div>
		
			<div class="form-group">
				<label asp-for="@Model.Price"></label>
				<input class="form-control" asp-for="@Model.Price" type="number" step="0.01"/>

				<span asp-validation-for="@Model.Price"></span>
			</div>
			<div class="form-group">
				<label asp-for="@Model.ReleaseDate"></label>
				<input class="form-control" asp-for="@Model.ReleaseDate" />

				<span asp-validation-for="@Model.ReleaseDate"></span>
			</div>

			<div class="form-group">
				<label asp-for="@Model.DeveloperId"></label>
				<input class="form-control" asp-for="@Model.DeveloperId" type="number"/>

				<span asp-validation-for="@Model.DeveloperId"></span>
			</div>

			<input OnChange="addPreviewImages()" class="mt-3" type="file" name="photos" multiple="multiple" accept="image/*" id="imgInp"/><br />

			
			<h2>Selected images:</h2><br />
		</div>

		<div class="col-7 mt-5">
			<div class="form-group">
				<label asp-for="@Model.Description"></label>
				<textarea  class="form-control" asp-for="@Model.Description" type="text" rows="10"></textarea >

				<span asp-validation-for="@Model.Description"></span>
			</div>
		</div>
	</div>

	<div id="previewScroll" class="mx-auto">
		<div id="previewImages">

		</div>
	</div>
		
@*	<div class="progress">
		<div class="progress-bar" role="progressbar"
				style="width: @ViewBag.progressPercent%" area-valuenow="@ViewBag.progressPercent"
				area-valuemin="0" area-valuemax="100">
		</div>
	</div>*@

	<div class="row justify-content-center mt-3">
		<button class="btn btn-success col-1" onclick="submit">Save</button>
	</div>
</form>


@section scripts
{
	<script>
		function addPreviewImages() {
			var selectedFile = $('#imgInp').get(0).files;
			var imagesHtml = "";
			for (var i = 0; i < selectedFile.length; i++)
				imagesHtml += "<img class='mx-1' width='300' src='" + URL.createObjectURL(selectedFile[i]) + "'>";


			$("#previewImages").html(imagesHtml);
			if (selectedFile.length > 3)
				$("#previewScroll").css({
					'overflow-size': 'scroll',
					'overflow-y': 'hidden'
				});

			$("#previewImages").css("width", selectedFile.length * 300 + selectedFile.length * 9)
		}
	</script>
}